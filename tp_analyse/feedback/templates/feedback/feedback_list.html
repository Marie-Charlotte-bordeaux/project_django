{% extends 'base.html' %} {% block title %}💬 Feedbacks pour « {{ job.job_title
}} »{% endblock %} {% block content %}
<div class="max-w-4xl mx-auto space-y-8">
  <h2 class="text-3xl font-bold text-pink-400">
    💬 Feedbacks pour « {{ job.job_title }} »
  </h2>

  <div class="flex flex-wrap gap-4">
    <a
      href="{% url 'add-feedback' job.id %}"
      class="px-4 py-2 bg-pink-600 hover:bg-pink-700 rounded text-white shadow"
    >
      ➕ Ajouter un feedback
    </a>
    <a
      href="{% url 'job-list' %}"
      class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white shadow"
    >
      ⬅️ Retour aux jobs
    </a>
  </div>

  <!-- Filtre -->
  <form method="get" class="flex flex-wrap items-center gap-2">
    <label for="min_rating" class="text-pink-300">Note exacte :</label>
    <input
      type="number"
      name="min_rating"
      id="min_rating"
      min="1"
      max="5"
      value="{{ min_rating }}"
      class="w-24 px-2 py-1 rounded bg-gray-800 border border-gray-600 text-white"
    />
    <button
      type="submit"
      class="px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded"
    >
      Filtrer
    </button>
    {% if min_rating %}
    <a
      href="{% url 'feedback-list' job.id %}"
      class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded"
    >
      ❌ Réinitialiser
    </a>
    {% endif %}
  </form>

  {% if min_rating %}
  <p class="text-sm text-purple-300">Filtre actif : Note = {{ min_rating }}</p>
  {% endif %}

  <!-- Feedbacks -->
  {% for feedback in feedbacks %}
  <div class="bg-gray-800 p-4 rounded-lg shadow border-l-4 border-pink-400">
    <p class="font-semibold text-pink-200">{{ feedback.author_name.name }}</p>
    <p class="text-yellow-400">⭐ Note : {{ feedback.rating }}/5</p>
    <p class="text-gray-300 italic">{{ feedback.comment }}</p>
    <small class="text-gray-500"
      >{{ feedback.created_at|date:"Y-m-d H:i" }}</small
    >
  </div>
  {% empty %}
  <p class="text-red-400">Aucun feedback trouvé pour ce filtre.</p>
  {% endfor %}
</div>
{% endblock %}
